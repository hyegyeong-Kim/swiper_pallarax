<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GSAP Fullpage Scroll</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      /* overflow: hidden; */
      font-family: sans-serif;
    }

    .section {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      color: white;
      position: relative;
    }

    .section1 { background: #111; }
    .section2 { background: #1976d2; }
    .section3 { background: #4caf50; }

    .parallax-text {
      opacity: 0;
      transform: translateY(50px);
    }
  </style>
</head>
<body>

<div id="container">
  <section class="section section1"><div class="parallax-text">Section 1</div></section>
  <section class="section section2"><div class="parallax-text">Section 2</div></section>
  <section class="section section3"><div class="parallax-text">Section 3</div></section>
</div>

<!-- GSAP + Plugins -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollToPlugin.min.js"></script>

<script>
  gsap.registerPlugin(ScrollToPlugin);

  const sections = document.querySelectorAll(".section");
  let currentIndex = 0;
  let isAnimating = false;

  // ğŸ” íœ  ì´ë²¤íŠ¸ë¡œ ì„¹ì…˜ ì „í™˜
  window.addEventListener("wheel", (e) => {
    if (isAnimating) return;

    if (e.deltaY > 0) {
      // next
      if (currentIndex < sections.length - 1) {
        currentIndex++;
        scrollToSection(currentIndex);
      }
    } else {
      // prev
      if (currentIndex > 0) {
        currentIndex--;
        scrollToSection(currentIndex);
      }
    }
  });

  function scrollToSection(index) {
    isAnimating = true;
    gsap.to(window, {
      duration: 1.2,
      scrollTo: {
        y: sections[index],
        autoKill: false
      },
      ease: "power2.out",
      onComplete: () => {
        isAnimating = false;
        animateText(sections[index]);
      }
    });
  }

  // âœ… ìµœì´ˆ 0ë²ˆ ì„¹ì…˜ í…ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜
  window.addEventListener("load", () => {
    scrollToSection(0);
  });

  // âœ… íŒ¨ëŸ´ëŸ­ìŠ¤ í…ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜
  function animateText(section) {
    const el = section.querySelector(".parallax-text");
    gsap.fromTo(el, { y: 50, opacity: 0 }, {
      y: 0, opacity: 1, duration: 1.2, ease: "power3.out"
    });
  }
</script>

</body>
</html>
