<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <link rel="stylesheet" href="/assets/css/common.css">
    <title>Document</title>
    <style>
        header {padding:20px;}
        .content section {height:100vh; display:flex; align-items:center; justify-content:center;}
        .content section:first-of-type {height:300vh; border:2px solid hotpink;}
        .content section:last-of-type {border:2px solid blue;}
        .content section p {
            width:300px;
            height:300px;
            color:#fff;
            font-size:70px;
            display:flex;
            justify-content:center;
            align-items:center;
            opacity: 0;
            transform: translateY(100px);
            transition: all 0.8s;
        }

        /* 색상만 다르게 지정 */
        .content section:first-of-type p {
            background: royalblue;
        }
        .content section:last-of-type p {
            background: orangered;
        }

        /* 나타나는 효과 */
        .content section p.on {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
<!-- <script>
    $(function(){
        $(window).on('scroll', function(){
            let winScroll = $(window).scrollTop(); //스크롤한 양
            let winHeight = $(window).height(); //현재 브라우저 화면 높이입니다. (사용자가 보고 있는 영역의 세로 크기)

            $('.content section').each(function(){
                let sectionTop = $(this).offset().top;//해당 section이 문서 전체에서 얼마나 떨어져 있는지 (px 단위).
                let sectionHeight = $(this).outerHeight();//해당 section의 실제 높이(px). 기본적으로 100vh이므로 브라우저 높이와 같음.
                let sectionCenter = sectionTop + (sectionHeight / 2);//하나의 section 요소의 세로 중앙 위치

                //화면 중앙과 섹션 중앙이 가까워지면
                //winScroll + winHeight / 2 (현재 스크롤 위치에서 보이는 화면의 중앙 위치)
                //화면 중앙과 section 중앙의 거리가 100px 이하일 때만
                if (Math.abs(sectionCenter - (winScroll + winHeight / 2)) < 100) {
                    $(this).find('p').addClass('on');
                }

                /*
                    | 조건                      | 의미                      
                    | ------------------------- | ----------------------- |
                    | `sectionCenter`           | 해당 section의 중심 좌표       |
                    | `winScroll + winHeight/2` | 현재 화면 중앙의 절대 좌표         |
                    | `Math.abs(...) < 100`     | 둘이 100px 이내로 가까우면 효과 발동 |
                */
            });
        });

        // 처음 로드 시 스크롤 이벤트 트리거
        $(window).trigger('scroll');
    });
</script> -->

<script>
$(function () {
  $(window).on('scroll', function () {
    let winScroll = $(window).scrollTop();
    let winHeight = $(window).height();
    let triggerPoint = winScroll + winHeight * 0.6;
    /* "지금 사용자가 보는 화면의 60% 지점이 문서 전체에서 몇 px 위치인지" 를 의미 */

    $('.content section').each(function () {
      const $p = $(this).find('p');
      let pTop = $p.offset().top;
      let pBottom = pTop + $p.outerHeight();

      // ✅ <p> 영역이 화면 60% 지점을 지나가야 발동
      if (triggerPoint > pTop && triggerPoint < pBottom) {
        $p.addClass('on');
      }
    });
  });


  /*
    ✅ 보너스: 화면의 100%, 50% 지점이 필요하다면?
    지점	     코드
    화면 상단 :	winScroll
    화면 하단 :	winScroll + winHeight
    화면 정중앙 : winScroll + winHeight * 0.5
    화면 80% 지점 :	winScroll + winHeight * 0.8
  */

  $(window).trigger('scroll');
});
</script>


</head>
<body>
    <div id="wrap">
        <header>
            Header
        </header>
        <div class="content">
            <section>
                <p>box1</p>
            </section>
            <section>
                <p>box2</p>
            </section>
        </div>
        <footer>
            Footer
        </footer>
    </div>
</body>
</html>